services:
  - type: web
    name: raport-diagnoza-auto
    env: node
    plan: free
    region: frankfurt
    buildCommand: "npm ci"
    startCommand: "node index.js"
    autoDeploy: true
    healthCheckPath: "/health"
    envVars:
      - key: NODE_VERSION
        value: 20
      # ---- IMAP (citire) ----
      - key: IMAP_HOST
        value: imap.gmail.com
      - key: IMAP_PORT
        value: "993"
      - key: IMAP_SECURE
        value: "true"
      - key: MAILBOX
        value: INBOX
      # ---- SMTP (trimitere) ----
      - key: SMTP_HOST
        value: smtp.gmail.com
      - key: SMTP_PORT
        value: "465"
      - key: SMTP_SECURE
        value: "true"
      # ---- LLM ----
      - key: OPENAI_API_KEY
        sync: false
      # ---- Destinatar raport ----
      - key: MAIL_TO
        sync: false
      # ---- Poll ----
      - key: POLL_SECONDS
        value: "120"
      # ---- Template & Assets ----
      - key: TEMPLATE_URL
        value: "https://stebenstudio.com/Raport-Diagnoza-Auto.html"
      - key: ASSETS_BASE_URL
        value: "https://stebenstudio.com"
      - key: INLINE_CSS
        value: "true"
      # Optional explicit:
      # - key: CSS_URL
      #   value: "https://stebenstudio.com/assets/css/style.css"
